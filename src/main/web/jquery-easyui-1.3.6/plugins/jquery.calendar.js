/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){var c=a.data(b,"calendar").options,d=a(b);c.fit?a.extend(c,d._fit()):d._fit(!1);var e=d.find(".calendar-header");d._outerWidth(c.width),d._outerHeight(c.height),d.find(".calendar-body")._outerHeight(d.height()-e._outerHeight())}function c(c){a(c).addClass("calendar").html('<div class="calendar-header"><div class="calendar-prevmonth"></div><div class="calendar-nextmonth"></div><div class="calendar-prevyear"></div><div class="calendar-nextyear"></div><div class="calendar-title"><span>Aprial 2010</span></div></div><div class="calendar-body"><div class="calendar-menu"><div class="calendar-menu-year-inner"><span class="calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text"></input></span><span class="calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div>'),a(c).find(".calendar-title span").hover(function(){a(this).addClass("calendar-menu-hover")},function(){a(this).removeClass("calendar-menu-hover")}).click(function(){var b=a(c).find(".calendar-menu");b.is(":visible")?b.hide():f(c)}),a(".calendar-prevmonth,.calendar-nextmonth,.calendar-prevyear,.calendar-nextyear",c).hover(function(){a(this).addClass("calendar-nav-hover")},function(){a(this).removeClass("calendar-nav-hover")}),a(c).find(".calendar-nextmonth").click(function(){d(c,1)}),a(c).find(".calendar-prevmonth").click(function(){d(c,-1)}),a(c).find(".calendar-nextyear").click(function(){e(c,1)}),a(c).find(".calendar-prevyear").click(function(){e(c,-1)}),a(c).bind("_resize",function(){var d=a.data(c,"calendar").options;return d.fit==1&&b(c),!1})}function d(b,c){var d=a.data(b,"calendar").options;d.month+=c,d.month>12?(d.year++,d.month=1):d.month<1&&(d.year--,d.month=12),h(b);var e=a(b).find(".calendar-menu-month-inner");e.find("td.calendar-selected").removeClass("calendar-selected"),e.find("td:eq("+(d.month-1)+")").addClass("calendar-selected")}function e(b,c){var d=a.data(b,"calendar").options;d.year+=c,h(b);var e=a(b).find(".calendar-menu-year");e.val(d.year)}function f(b){function j(d){var e=a(b).find(".calendar-menu"),f=e.find(".calendar-menu-year").val(),g=e.find(".calendar-selected").attr("abbr");isNaN(f)||(c.year=parseInt(f),c.month=parseInt(g),h(b)),d&&e.hide()}var c=a.data(b,"calendar").options;a(b).find(".calendar-menu").show();if(a(b).find(".calendar-menu-month-inner").is(":empty")){a(b).find(".calendar-menu-month-inner").empty();var d=a('<table class="calendar-mtable"></table>').appendTo(a(b).find(".calendar-menu-month-inner")),e=0;for(var f=0;f<3;f++){var g=a("<tr></tr>").appendTo(d);for(var i=0;i<4;i++)a('<td class="calendar-menu-month"></td>').html(c.months[e++]).attr("abbr",e).appendTo(g)}a(b).find(".calendar-menu-prev,.calendar-menu-next").hover(function(){a(this).addClass("calendar-menu-hover")},function(){a(this).removeClass("calendar-menu-hover")}),a(b).find(".calendar-menu-next").click(function(){var c=a(b).find(".calendar-menu-year");isNaN(c.val())||(c.val(parseInt(c.val())+1),j())}),a(b).find(".calendar-menu-prev").click(function(){var c=a(b).find(".calendar-menu-year");isNaN(c.val())||(c.val(parseInt(c.val()-1)),j())}),a(b).find(".calendar-menu-year").keypress(function(a){a.keyCode==13&&j(!0)}),a(b).find(".calendar-menu-month").hover(function(){a(this).addClass("calendar-menu-hover")},function(){a(this).removeClass("calendar-menu-hover")}).click(function(){var c=a(b).find(".calendar-menu");c.find(".calendar-selected").removeClass("calendar-selected"),a(this).addClass("calendar-selected"),j(!0)})}var k=a(b).find(".calendar-body"),l=a(b).find(".calendar-menu"),m=l.find(".calendar-menu-year-inner"),n=l.find(".calendar-menu-month-inner");m.find("input").val(c.year).focus(),n.find("td.calendar-selected").removeClass("calendar-selected"),n.find("td:eq("+(c.month-1)+")").addClass("calendar-selected"),l._outerWidth(k._outerWidth()),l._outerHeight(k._outerHeight()),n._outerHeight(l.height()-m._outerHeight())}function g(b,c,d){var e=a.data(b,"calendar").options,f=[],g=(new Date(c,d,0)).getDate();for(var h=1;h<=g;h++)f.push([c,d,h]);var i=[],j=[],k=-1;while(f.length>0){var l=f.shift();j.push(l);var m=(new Date(l[0],l[1]-1,l[2])).getDay();k==m?m=0:m==(e.firstDay==0?7:e.firstDay)-1&&(i.push(j),j=[]),k=m}j.length&&i.push(j);var n=i[0];if(n.length<7)while(n.length<7){var o=n[0],l=new Date(o[0],o[1]-1,o[2]-1);n.unshift([l.getFullYear(),l.getMonth()+1,l.getDate()])}else{var o=n[0],j=[];for(var h=1;h<=7;h++){var l=new Date(o[0],o[1]-1,o[2]-h);j.unshift([l.getFullYear(),l.getMonth()+1,l.getDate()])}i.unshift(j)}var p=i[i.length-1];while(p.length<7){var q=p[p.length-1],l=new Date(q[0],q[1]-1,q[2]+1);p.push([l.getFullYear(),l.getMonth()+1,l.getDate()])}if(i.length<6){var q=p[p.length-1],j=[];for(var h=1;h<=7;h++){var l=new Date(q[0],q[1]-1,q[2]+h);j.push([l.getFullYear(),l.getMonth()+1,l.getDate()])}i.push(j)}return i}function h(b){var c=a.data(b,"calendar").options;c.current&&!c.validator.call(b,c.current)&&(c.current=null);var d=new Date,e=d.getFullYear()+","+(d.getMonth()+1)+","+d.getDate(),f=c.current?c.current.getFullYear()+","+(c.current.getMonth()+1)+","+c.current.getDate():"",h=6-c.firstDay,i=h+1;h>=7&&(h-=7),i>=7&&(i-=7),a(b).find(".calendar-title span").html(c.months[c.month-1]+" "+c.year);var j=a(b).find("div.calendar-body");j.children("table").remove();var k=['<table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0">'];k.push("<thead><tr>");for(var l=c.firstDay;l<c.weeks.length;l++)k.push("<th>"+c.weeks[l]+"</th>");for(var l=0;l<c.firstDay;l++)k.push("<th>"+c.weeks[l]+"</th>");k.push("</tr></thead>"),k.push("<tbody>");var m=g(b,c.year,c.month);for(var l=0;l<m.length;l++){var n=m[l],o="";l==0?o="calendar-first":l==m.length-1&&(o="calendar-last"),k.push('<tr class="'+o+'">');for(var p=0;p<n.length;p++){var q=n[p],r=q[0]+","+q[1]+","+q[2],s=new Date(q[0],parseInt(q[1])-1,q[2]),t=c.formatter.call(b,s),u=c.styler.call(b,s),v="",w="";typeof u=="string"?w=u:u&&(v=u["class"]||"",w=u.style||"");var o="calendar-day";if(c.year!=q[0]||c.month!=q[1])o+=" calendar-other-month";r==e&&(o+=" calendar-today"),r==f&&(o+=" calendar-selected"),p==h?o+=" calendar-saturday":p==i&&(o+=" calendar-sunday"),p==0?o+=" calendar-first":p==n.length-1&&(o+=" calendar-last"),o+=" "+v,c.validator.call(b,s)||(o+=" calendar-disabled"),k.push('<td class="'+o+'" abbr="'+r+'" style="'+w+'">'+t+"</td>")}k.push("</tr>")}k.push("</tbody>"),k.push("</table>"),j.append(k.join(""));var x=j.children("table.calendar-dtable").prependTo(j);x.find("td.calendar-day:not(.calendar-disabled)").hover(function(){a(this).addClass("calendar-hover")},function(){a(this).removeClass("calendar-hover")}).click(function(){var d=c.current;x.find(".calendar-selected").removeClass("calendar-selected"),a(this).addClass("calendar-selected");var e=a(this).attr("abbr").split(",");c.current=new Date(e[0],parseInt(e[1])-1,e[2]),c.onSelect.call(b,c.current),(!d||d.getTime()!=c.current.getTime())&&c.onChange.call(b,c.current,d)})}a.fn.calendar=function(d,e){return typeof d=="string"?a.fn.calendar.methods[d](this,e):(d=d||{},this.each(function(){var e=a.data(this,"calendar");e?a.extend(e.options,d):(e=a.data(this,"calendar",{options:a.extend({},a.fn.calendar.defaults,a.fn.calendar.parseOptions(this),d)}),c(this)),e.options.border==0&&a(this).addClass("calendar-noborder"),b(this),h(this),a(this).find("div.calendar-menu").hide()}))},a.fn.calendar.methods={options:function(b){return a.data(b[0],"calendar").options},resize:function(a){return a.each(function(){b(this)})},moveTo:function(b,c){return b.each(function(){var b=a(this).calendar("options");if(b.validator.call(this,c)){var d=b.current;a(this).calendar({year:c.getFullYear(),month:c.getMonth()+1,current:c}),(!d||d.getTime()!=c.getTime())&&b.onChange.call(this,b.current,d)}})}},a.fn.calendar.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["width","height",{firstDay:"number",fit:"boolean",border:"boolean"}]))},a.fn.calendar.defaults={width:180,height:180,fit:!1,border:!0,firstDay:0,weeks:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())}(),formatter:function(a){return a.getDate()},styler:function(a){return""},validator:function(a){return!0},onSelect:function(a){},onChange:function(a,b){}}})(jQuery)