/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){var d=a.data(b,"combotree"),e=d.options,f=d.tree;a(b).addClass("combotree-f"),a(b).combo(e);var g=a(b).combo("panel");f||(f=a("<ul></ul>").appendTo(g),a.data(b,"combotree").tree=f),f.tree(a.extend({},e,{checkbox:e.multiple,onLoadSuccess:function(c,d){var g=a(b).combotree("getValues");if(e.multiple){var h=f.tree("getChecked");for(var i=0;i<h.length;i++){var j=h[i].id;(function(){for(var a=0;a<g.length;a++)if(j==g[a])return;g.push(j)})()}}var k=a(this).tree("options"),l=k.onCheck,m=k.onSelect;k.onCheck=k.onSelect=function(){},a(b).combotree("setValues",g),k.onCheck=l,k.onSelect=m,e.onLoadSuccess.call(this,c,d)},onClick:function(d){e.multiple?a(this).tree(d.checked?"uncheck":"check",d.target):a(b).combo("hidePanel"),c(b),e.onClick.call(this,d)},onCheck:function(a,d){c(b),e.onCheck.call(this,a,d)}}))}function c(b){var c=a.data(b,"combotree"),d=c.options,e=c.tree,f=[],g=[];if(d.multiple){var h=e.tree("getChecked");for(var i=0;i<h.length;i++)f.push(h[i].id),g.push(h[i].text)}else{var j=e.tree("getSelected");j&&(f.push(j.id),g.push(j.text))}a(b).combo("setValues",f).combo("setText",g.join(d.separator))}function d(b,c){var d=a.data(b,"combotree").options,e=a.data(b,"combotree").tree;e.find("span.tree-checkbox").addClass("tree-checkbox0").removeClass("tree-checkbox1 tree-checkbox2");var f=[],g=[];for(var h=0;h<c.length;h++){var i=c[h],j=i,k=e.tree("find",i);k&&(j=k.text,e.tree("check",k.target),e.tree("select",k.target)),f.push(i),g.push(j)}a(b).combo("setValues",f).combo("setText",g.join(d.separator))}a.fn.combotree=function(c,d){if(typeof c=="string"){var e=a.fn.combotree.methods[c];return e?e(this,d):this.combo(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"combotree");d?a.extend(d.options,c):a.data(this,"combotree",{options:a.extend({},a.fn.combotree.defaults,a.fn.combotree.parseOptions(this),c)}),b(this)})},a.fn.combotree.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"combotree").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},tree:function(b){return a.data(b[0],"combotree").tree},loadData:function(b,c){return b.each(function(){var b=a.data(this,"combotree").options;b.data=c;var d=a.data(this,"combotree").tree;d.tree("loadData",c)})},reload:function(b,c){return b.each(function(){var b=a.data(this,"combotree").options,d=a.data(this,"combotree").tree;c&&(b.url=c),d.tree({url:b.url})})},setValues:function(a,b){return a.each(function(){d(this,b)})},setValue:function(a,b){return a.each(function(){d(this,[b])})},clear:function(b){return b.each(function(){var b=a.data(this,"combotree").tree;b.find("div.tree-node-selected").removeClass("tree-node-selected");var c=b.tree("getChecked");for(var d=0;d<c.length;d++)b.tree("uncheck",c[d].target);a(this).combo("clear")})},reset:function(b){return b.each(function(){var b=a(this).combotree("options");b.multiple?a(this).combotree("setValues",b.originalValue):a(this).combotree("setValue",b.originalValue)})}},a.fn.combotree.parseOptions=function(b){return a.extend({},a.fn.combo.parseOptions(b),a.fn.tree.parseOptions(b))},a.fn.combotree.defaults=a.extend({},a.fn.combo.defaults,a.fn.tree.defaults,{editable:!1})})(jQuery)