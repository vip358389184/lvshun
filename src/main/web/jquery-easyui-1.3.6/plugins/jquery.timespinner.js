/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){var d=a.data(b,"timespinner").options;a(b).addClass("timespinner-f"),a(b).spinner(d),a(b).unbind(".timespinner"),a(b).bind("click.timespinner",function(){var a=0;if(this.selectionStart!=null)a=this.selectionStart;else if(this.createTextRange){var e=b.createTextRange(),f=document.selection.createRange();f.setEndPoint("StartToStart",e),a=f.text.length}a>=0&&a<=2?d.highlight=0:a>=3&&a<=5?d.highlight=1:a>=6&&a<=8&&(d.highlight=2),c(b)}).bind("blur.timespinner",function(){e(b)})}function c(b){var c=a.data(b,"timespinner").options,d=0,e=0;c.highlight==0?(d=0,e=2):c.highlight==1?(d=3,e=5):c.highlight==2&&(d=6,e=8);if(b.selectionStart!=null)b.setSelectionRange(d,e);else if(b.createTextRange){var f=b.createTextRange();f.collapse(),f.moveEnd("character",e),f.moveStart("character",d),f.select()}a(b).focus()}function d(b,c){var d=a.data(b,"timespinner").options;if(!c)return null;var e=c.split(d.separator);for(var f=0;f<e.length;f++)if(isNaN(e[f]))return null;while(e.length<3)e.push(0);return new Date(1900,0,0,e[0],e[1],e[2])}function e(b){function k(a){return(a<10?"0":"")+a}var c=a.data(b,"timespinner").options,e=a(b).val(),f=d(b,e);if(!f){c.value="",a(b).spinner("setValue","");return}var g=d(b,c.min),h=d(b,c.max);g&&g>f&&(f=g),h&&h<f&&(f=h);var i=[k(f.getHours()),k(f.getMinutes())];c.showSeconds&&i.push(k(f.getSeconds()));var j=i.join(c.separator);c.value=j,a(b).spinner("setValue",j)}function f(b,d){var f=a.data(b,"timespinner").options,g=a(b).val();g==""&&(g=[0,0,0].join(f.separator));var h=g.split(f.separator);for(var i=0;i<h.length;i++)h[i]=parseInt(h[i],10);d==1?h[f.highlight]-=f.increment:h[f.highlight]+=f.increment,a(b).val(h.join(f.separator)),e(b),c(b)}a.fn.timespinner=function(c,d){if(typeof c=="string"){var e=a.fn.timespinner.methods[c];return e?e(this,d):this.spinner(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"timespinner");d?a.extend(d.options,c):a.data(this,"timespinner",{options:a.extend({},a.fn.timespinner.defaults,a.fn.timespinner.parseOptions(this),c)}),b(this)})},a.fn.timespinner.methods={options:function(b){var c=a.data(b[0],"timespinner").options;return a.extend(c,{value:b.val(),originalValue:b.spinner("options").originalValue})},setValue:function(b,c){return b.each(function(){a(this).val(c),e(this)})},getHours:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[0],10)},getMinutes:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[1],10)},getSeconds:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[2],10)||0}},a.fn.timespinner.parseOptions=function(b){return a.extend({},a.fn.spinner.parseOptions(b),a.parser.parseOptions(b,["separator",{showSeconds:"boolean",highlight:"number"}]))},a.fn.timespinner.defaults=a.extend({},a.fn.spinner.defaults,{separator:":",showSeconds:!1,highlight:0,spin:function(a){f(this,a)}})})(jQuery)