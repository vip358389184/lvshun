/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){var c=a.data(b,"datetimebox"),d=c.options;a(b).datebox(a.extend({},d,{onShowPanel:function(){var c=a(b).datetimebox("getValue");f(b,c,!0),d.onShowPanel.call(b)},formatter:a.fn.datebox.defaults.formatter,parser:a.fn.datebox.defaults.parser})),a(b).removeClass("datebox-f").addClass("datetimebox-f"),a(b).datebox("calendar").calendar({onSelect:function(a){d.onSelect.call(b,a)}});var e=a(b).datebox("panel");if(!c.spinner){var g=a('<div style="padding:2px"><input style="width:80px"></div>').insertAfter(e.children("div.datebox-calendar-inner"));c.spinner=g.children("input")}c.spinner.timespinner({showSeconds:d.showSeconds,separator:d.timeSeparator}).unbind(".datetimebox").bind("mousedown.datetimebox",function(a){a.stopPropagation()}),f(b,d.value)}function c(b){var c=a(b).datetimebox("calendar"),d=a(b).datetimebox("spinner"),e=c.calendar("options").current;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),d.timespinner("getHours"),d.timespinner("getMinutes"),d.timespinner("getSeconds"))}function d(a,b){f(a,b,!0)}function e(b){var d=a.data(b,"datetimebox").options,e=c(b);f(b,d.formatter.call(b,e)),a(b).combo("hidePanel")}function f(b,c,d){function g(c){function d(a){return(a<10?"0":"")+a}var f=[d(c.getHours()),d(c.getMinutes())];return e.showSeconds&&f.push(d(c.getSeconds())),f.join(a(b).datetimebox("spinner").timespinner("options").separator)}var e=a.data(b,"datetimebox").options;a(b).combo("setValue",c);if(!d)if(c){var f=e.parser.call(b,c);a(b).combo("setValue",e.formatter.call(b,f)),a(b).combo("setText",e.formatter.call(b,f))}else a(b).combo("setText",c);var f=e.parser.call(b,c);a(b).datetimebox("calendar").calendar("moveTo",f),a(b).datetimebox("spinner").timespinner("setValue",g(f))}a.fn.datetimebox=function(c,d){if(typeof c=="string"){var e=a.fn.datetimebox.methods[c];return e?e(this,d):this.datebox(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"datetimebox");d?a.extend(d.options,c):a.data(this,"datetimebox",{options:a.extend({},a.fn.datetimebox.defaults,a.fn.datetimebox.parseOptions(this),c)}),b(this)})},a.fn.datetimebox.methods={options:function(b){var c=b.datebox("options");return a.extend(a.data(b[0],"datetimebox").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},spinner:function(b){return a.data(b[0],"datetimebox").spinner},setValue:function(a,b){return a.each(function(){f(this,b)})},reset:function(b){return b.each(function(){var b=a(this).datetimebox("options");a(this).datetimebox("setValue",b.originalValue)})}},a.fn.datetimebox.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.datebox.parseOptions(b),a.parser.parseOptions(b,["timeSeparator",{showSeconds:"boolean"}]))},a.fn.datetimebox.defaults=a.extend({},a.fn.datebox.defaults,{showSeconds:!0,timeSeparator:":",keyHandler:{up:function(a){},down:function(a){},left:function(a){},right:function(a){},enter:function(a){e(this)},query:function(a,b){d(this,a)}},buttons:[{text:function(b){return a(b).datetimebox("options").currentText},handler:function(b){a(b).datetimebox("calendar").calendar({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:new Date}),e(b)}},{text:function(b){return a(b).datetimebox("options").okText},handler:function(a){e(a)}},{text:function(b){return a(b).datetimebox("options").closeText},handler:function(b){a(this).closest("div.combo-panel").panel("close")}}],formatter:function(b){function f(a){return(a<10?"0":"")+a}var c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),g=a(this).datetimebox("spinner").timespinner("options").separator,h=a.fn.datebox.defaults.formatter(b)+" "+f(c)+g+f(d);return a(this).datetimebox("options").showSeconds&&(h+=g+f(e)),h},parser:function(b){if(a.trim(b)=="")return new Date;var c=b.split(" "),d=a.fn.datebox.defaults.parser(c[0]);if(c.length<2)return d;var e=a(this).datetimebox("spinner").timespinner("options").separator,f=c[1].split(e),g=parseInt(f[0],10)||0,h=parseInt(f[1],10)||0,i=parseInt(f[2],10)||0;return new Date(d.getFullYear(),d.getMonth(),d.getDate(),g,h,i)}})})(jQuery)