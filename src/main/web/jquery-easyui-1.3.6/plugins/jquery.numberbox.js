/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){a(b).addClass("numberbox numberbox-f");var c=a('<input type="hidden">').insertAfter(b),d=a(b).attr("name");return d&&(c.attr("name",d),a(b).removeAttr("name").attr("numberboxName",d)),c}function c(b){var c=a.data(b,"numberbox").options,d=c.onChange;c.onChange=function(){},f(b,c.parser.call(b,c.value)),c.onChange=d,c.originalValue=e(b)}function d(b,c){var d=a.data(b,"numberbox").options;c&&(d.width=c);var e=a(b),f=a('<div style="display:none"></div>').insertBefore(e);e.appendTo("body"),isNaN(d.width)&&(d.width=e.outerWidth()),e._outerWidth(d.width)._outerHeight(d.height),e.css("line-height",e.height()+"px"),e.insertAfter(f),f.remove()}function e(b){return a.data(b,"numberbox").field.val()}function f(b,c){var d=a.data(b,"numberbox"),f=d.options,g=e(b);c=f.parser.call(b,c),f.value=c,d.field.val(c),a(b).val(f.formatter.call(b,c)),g!=c&&f.onChange.call(b,c,g)}function g(b){var c=a.data(b,"numberbox").options;a(b).unbind(".numberbox").bind("keypress.numberbox",function(a){return c.filter.call(b,a)}).bind("blur.numberbox",function(){f(b,a(this).val()),a(this).val(c.formatter.call(b,e(b)))}).bind("focus.numberbox",function(){var d=e(b);d!=c.parser.call(b,a(this).val())&&a(this).val(c.formatter.call(b,d))})}function h(b){if(a.fn.validatebox){var c=a.data(b,"numberbox").options;a(b).validatebox(c)}}function i(b,c){var d=a.data(b,"numberbox").options;c?(d.disabled=!0,a(b).attr("disabled",!0)):(d.disabled=!1,a(b).removeAttr("disabled"))}a.fn.numberbox=function(e,f){if(typeof e=="string"){var j=a.fn.numberbox.methods[e];return j?j(this,f):this.validatebox(e,f)}return e=e||{},this.each(function(){var f=a.data(this,"numberbox");f?a.extend(f.options,e):(f=a.data(this,"numberbox",{options:a.extend({},a.fn.numberbox.defaults,a.fn.numberbox.parseOptions(this),e),field:b(this)}),a(this).removeAttr("disabled"),a(this).css({imeMode:"disabled"})),i(this,f.options.disabled),d(this),g(this),h(this),c(this)})},a.fn.numberbox.methods={options:function(b){return a.data(b[0],"numberbox").options},destroy:function(b){return b.each(function(){a.data(this,"numberbox").field.remove(),a(this).validatebox("destroy"),a(this).remove()})},resize:function(a,b){return a.each(function(){d(this,b)})},disable:function(a){return a.each(function(){i(this,!0)})},enable:function(a){return a.each(function(){i(this,!1)})},fix:function(b){return b.each(function(){f(this,a(this).val())})},setValue:function(a,b){return a.each(function(){f(this,b)})},getValue:function(a){return e(a[0])},clear:function(b){return b.each(function(){var b=a.data(this,"numberbox");b.field.val(""),a(this).val("")})},reset:function(b){return b.each(function(){var b=a(this).numberbox("options");a(this).numberbox("setValue",b.originalValue)})}},a.fn.numberbox.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.validatebox.parseOptions(b),a.parser.parseOptions(b,["width","height","decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:c.attr("prefix")?c.attr("prefix"):undefined,disabled:c.attr("disabled")?!0:undefined,value:c.val()||undefined})},a.fn.numberbox.defaults=a.extend({},a.fn.validatebox.defaults,{width:"auto",height:22,disabled:!1,value:"",min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(b){var c=a(this).numberbox("options");if(b.which==45)return a(this).val().indexOf("-")==-1?!0:!1;var d=String.fromCharCode(b.which);return d==c.decimalSeparator?a(this).val().indexOf(d)==-1?!0:!1:d==c.groupSeparator?!0:b.which>=48&&b.which<=57&&b.ctrlKey==0&&b.shiftKey==0||b.which==0||b.which==8?!0:b.ctrlKey!=1||b.which!=99&&b.which!=118?!1:!0},formatter:function(b){if(!b)return b;b+="";var c=a(this).numberbox("options"),d=b,e="",f=b.indexOf(".");f>=0&&(d=b.substring(0,f),e=b.substring(f+1,b.length));if(c.groupSeparator){var g=/(\d+)(\d{3})/;while(g.test(d))d=d.replace(g,"$1"+c.groupSeparator+"$2")}return e?c.prefix+d+c.decimalSeparator+e+c.suffix:c.prefix+d+c.suffix},parser:function(b){b+="";var c=a(this).numberbox("options");parseFloat(b)!=b&&(c.prefix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.prefix),"g"),""))),c.suffix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.suffix),"g"),""))),c.groupSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.groupSeparator,"g"),""))),c.decimalSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.decimalSeparator,"g"),"."))),b=b.replace(/\s/g,""));var d=parseFloat(b).toFixed(c.precision);return isNaN(d)?d="":typeof c.min=="number"&&d<c.min?d=c.min.toFixed(c.precision):typeof c.max=="number"&&d>c.max&&(d=c.max.toFixed(c.precision)),d},onChange:function(a,b){}})})(jQuery)