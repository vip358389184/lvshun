/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b,c){var d=a.data(b,"window").options;c&&a.extend(d,c),a(b).panel("resize",d)}function c(b,c){var d=a.data(b,"window");c&&(c.left!=null&&(d.options.left=c.left),c.top!=null&&(d.options.top=c.top)),a(b).panel("move",d.options),d.shadow&&d.shadow.css({left:d.options.left,top:d.options.top})}function d(b,d){var e=a.data(b,"window"),f=e.options,g=f.width;isNaN(g)&&(g=e.window._outerWidth());if(f.inline){var h=e.window.parent();f.left=(h.width()-g)/2+h.scrollLeft()}else f.left=(a(window)._outerWidth()-g)/2+a(document).scrollLeft();d&&c(b)}function e(b,d){var e=a.data(b,"window"),f=e.options,g=f.height;isNaN(g)&&(g=e.window._outerHeight());if(f.inline){var h=e.window.parent();f.top=(h.height()-g)/2+h.scrollTop()}else f.top=(a(window)._outerHeight()-g)/2+a(document).scrollTop();d&&c(b)}function f(b){var f=a.data(b,"window"),g=f.options.closed,i=a(b).panel(a.extend({},f.options,{border:!1,doSize:!0,closed:!0,cls:"window",headerCls:"window-header",bodyCls:"window-body "+(f.options.noheader?"window-body-noheader":""),onBeforeDestroy:function(){if(f.options.onBeforeDestroy.call(b)==0)return!1;f.shadow&&f.shadow.remove(),f.mask&&f.mask.remove()},onClose:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onClose.call(b)},onOpen:function(){f.mask&&f.mask.css({display:"block",zIndex:a.fn.window.defaults.zIndex++}),f.shadow&&f.shadow.css({display:"block",zIndex:a.fn.window.defaults.zIndex++,left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.window.css("z-index",a.fn.window.defaults.zIndex++),f.options.onOpen.call(b)},onResize:function(c,d){var e=a(this).panel("options");a.extend(f.options,{width:e.width,height:e.height,left:e.left,top:e.top}),f.shadow&&f.shadow.css({left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.options.onResize.call(b,c,d)},onMinimize:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onMinimize.call(b)},onBeforeCollapse:function(){if(f.options.onBeforeCollapse.call(b)==0)return!1;f.shadow&&f.shadow.hide()},onExpand:function(){f.shadow&&f.shadow.show(),f.options.onExpand.call(b)}}));f.window=i.panel("panel"),f.mask&&f.mask.remove(),f.options.modal==1&&(f.mask=a('<div class="window-mask"></div>').insertAfter(f.window),f.mask.css({width:f.options.inline?f.mask.parent().width():h().width,height:f.options.inline?f.mask.parent().height():h().height,display:"none"})),f.shadow&&f.shadow.remove(),f.options.shadow==1&&(f.shadow=a('<div class="window-shadow"></div>').insertAfter(f.window),f.shadow.css({display:"none"})),f.options.left==null&&d(b),f.options.top==null&&e(b),c(b),g||i.window("open")}function g(c){var d=a.data(c,"window");d.window.draggable({handle:">div.panel-header>div.panel-title",disabled:d.options.draggable==0,onStartDrag:function(b){d.mask&&d.mask.css("z-index",a.fn.window.defaults.zIndex++),d.shadow&&d.shadow.css("z-index",a.fn.window.defaults.zIndex++),d.window.css("z-index",a.fn.window.defaults.zIndex++),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({display:"none",zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(d.window._outerWidth()),d.proxy._outerHeight(d.window._outerHeight()),setTimeout(function(){d.proxy&&d.proxy.show()},500)},onDrag:function(a){return d.proxy.css({display:"block",left:a.data.left,top:a.data.top}),!1},onStopDrag:function(b){d.options.left=b.data.left,d.options.top=b.data.top,a(c).window("move"),d.proxy.remove(),d.proxy=null}}),d.window.resizable({disabled:d.options.resizable==0,onStartResize:function(b){d.pmask=a('<div class="window-proxy-mask"></div>').insertAfter(d.window),d.pmask.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top,width:d.window._outerWidth(),height:d.window._outerHeight()}),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(b.data.width),d.proxy._outerHeight(b.data.height)},onResize:function(a){return d.proxy.css({left:a.data.left,top:a.data.top}),d.proxy._outerWidth(a.data.width),d.proxy._outerHeight(a.data.height),!1},onStopResize:function(e){a.extend(d.options,{left:e.data.left,top:e.data.top,width:e.data.width,height:e.data.height}),b(c),d.pmask.remove(),d.pmask=null,d.proxy.remove(),d.proxy=null}})}function h(){return document.compatMode=="BackCompat"?{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}:{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}a(window).resize(function(){a("body>div.window-mask").css({width:a(window)._outerWidth(),height:a(window)._outerHeight()}),setTimeout(function(){a("body>div.window-mask").css({width:h().width,height:h().height})},50)}),a.fn.window=function(b,c){if(typeof b=="string"){var d=a.fn.window.methods[b];return d?d(this,c):this.panel(b,c)}return b=b||{},this.each(function(){var c=a.data(this,"window");c?a.extend(c.options,b):(c=a.data(this,"window",{options:a.extend({},a.fn.window.defaults,a.fn.window.parseOptions(this),b)}),c.options.inline||document.body.appendChild(this)),f(this),g(this)})},a.fn.window.methods={options:function(b){var c=b.panel("options"),d=a.data(b[0],"window").options;return a.extend(d,{closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized})},window:function(b){return a.data(b[0],"window").window},resize:function(a,c){return a.each(function(){b(this,c)})},move:function(a,b){return a.each(function(){c(this,b)})},hcenter:function(a){return a.each(function(){d(this,!0)})},vcenter:function(a){return a.each(function(){e(this,!0)})},center:function(a){return a.each(function(){d(this),e(this),c(this)})}},a.fn.window.parseOptions=function(b){return a.extend({},a.fn.panel.parseOptions(b),a.parser.parseOptions(b,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},a.fn.window.defaults=a.extend({},a.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1})})(jQuery)