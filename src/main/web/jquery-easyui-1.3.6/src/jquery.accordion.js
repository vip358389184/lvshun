/**
 * jQuery EasyUI 1.3.6
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */

(function(a){function b(b){function j(a,b){var c=0;for(var d=0;d<e.length;d++){var h=e[d],i=h.panel("header")._outerHeight(g);if(h.panel("options").collapsible==a){var j=isNaN(b)?undefined:b+g*i.length;h.panel("resize",{width:f.width(),height:a?j:undefined}),c+=h.panel("panel").outerHeight()-g}}return c}var c=a.data(b,"accordion"),d=c.options,e=c.panels,f=a(b);d.fit?a.extend(d,f._fit()):f._fit(!1),isNaN(d.width)?f.css("width",""):f._outerWidth(d.width);var g=0,h="auto",i=f.find(">div.panel>div.accordion-header");i.length&&(g=a(i[0]).css("height","")._outerHeight()),isNaN(d.height)?f.css("height",""):(f._outerHeight(d.height),h=f.height()-g*i.length),j(!0,h-j(!1)+1)}function c(b,c,d,e){var f=a.data(b,"accordion").panels,g=[];for(var h=0;h<f.length;h++){var i=f[h];if(c)i.panel("options")[c]==d&&g.push(i);else if(i[0]==a(d)[0])return h}return c?e?g:g.length?g[0]:null:-1}function d(a){return c(a,"collapsed",!1,!0)}function e(a){var b=d(a);return b.length?b[0]:null}function f(a,b){return c(a,null,b)}function g(b,d){var e=a.data(b,"accordion").panels;return typeof d=="number"?d<0||d>=e.length?null:e[d]:c(b,"title",d)}function h(b){var c=a.data(b,"accordion").options,d=a(b);c.border?d.removeClass("accordion-noborder"):d.addClass("accordion-noborder")}function i(c){var d=a.data(c,"accordion"),e=a(c);e.addClass("accordion"),d.panels=[],e.children("div").each(function(){var b=a.extend({},a.parser.parseOptions(this),{selected:a(this).attr("selected")?!0:undefined}),e=a(this);d.panels.push(e),j(c,e,b)}),e.bind("_resize",function(d,e){var f=a.data(c,"accordion").options;return(f.fit==1||e)&&b(c),!1})}function j(b,c,e){var g=a.data(b,"accordion").options;c.panel(a.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body"},e,{onBeforeExpand:function(){if(e.onBeforeExpand&&e.onBeforeExpand.call(this)==0)return!1;if(!g.multiple){var c=a.grep(d(b),function(a){return a.panel("options").collapsible});for(var h=0;h<c.length;h++)l(b,f(b,c[h]))}var i=a(this).panel("header");i.addClass("accordion-header-selected"),i.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){e.onExpand&&e.onExpand.call(this),g.onSelect.call(b,a(this).panel("options").title,f(b,this))},onBeforeCollapse:function(){if(e.onBeforeCollapse&&e.onBeforeCollapse.call(this)==0)return!1;var b=a(this).panel("header");b.removeClass("accordion-header-selected"),b.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){e.onCollapse&&e.onCollapse.call(this),g.onUnselect.call(b,a(this).panel("options").title,f(b,this))}}));var h=c.panel("header"),i=h.children("div.panel-tool");i.children("a.panel-tool-collapse").hide();var j=a('<a href="javascript:void(0)"></a>').addClass("accordion-collapse accordion-expand").appendTo(i);j.bind("click",function(){var a=f(b,c);return c.panel("options").collapsed?k(b,a):l(b,a),!1}),c.panel("options").collapsible?j.show():j.hide(),h.click(function(){return a(this).find("a.accordion-collapse:visible").triggerHandler("click"),!1})}function k(b,c){var d=g(b,c);if(!d)return;n(b);var e=a.data(b,"accordion").options;d.panel("expand",e.animate)}function l(b,c){var d=g(b,c);if(!d)return;n(b);var e=a.data(b,"accordion").options;d.panel("collapse",e.animate)}function m(b){function g(a){var c=d.animate;d.animate=!1,k(b,a),d.animate=c}var d=a.data(b,"accordion").options,e=c(b,"selected",!0);e?g(f(b,e)):g(d.selected)}function n(b){var c=a.data(b,"accordion").panels;for(var d=0;d<c.length;d++)c[d].stop(!0,!0)}function o(c,d){var e=a.data(c,"accordion"),f=e.options,g=e.panels;d.selected==undefined&&(d.selected=!0),n(c);var h=a("<div></div>").appendTo(c);g.push(h),j(c,h,d),b(c),f.onAdd.call(c,d.title,g.length-1),d.selected&&k(c,g.length-1)}function p(c,d){var h=a.data(c,"accordion"),i=h.options,j=h.panels;n(c);var l=g(c,d),m=l.panel("options").title,o=f(c,l);if(!l)return;if(i.onBeforeRemove.call(c,m,o)==0)return;j.splice(o,1),l.panel("destroy");if(j.length){b(c);var p=e(c);p||k(c,0)}i.onRemove.call(c,m,o)}a.fn.accordion=function(c,d){return typeof c=="string"?a.fn.accordion.methods[c](this,d):(c=c||{},this.each(function(){var d=a.data(this,"accordion");d?a.extend(d.options,c):(a.data(this,"accordion",{options:a.extend({},a.fn.accordion.defaults,a.fn.accordion.parseOptions(this),c),accordion:a(this).addClass("accordion"),panels:[]}),i(this)),h(this),b(this),m(this)}))},a.fn.accordion.methods={options:function(b){return a.data(b[0],"accordion").options},panels:function(b){return a.data(b[0],"accordion").panels},resize:function(a){return a.each(function(){b(this)})},getSelections:function(a){return d(a[0])},getSelected:function(a){return e(a[0])},getPanel:function(a,b){return g(a[0],b)},getPanelIndex:function(a,b){return f(a[0],b)},select:function(a,b){return a.each(function(){k(this,b)})},unselect:function(a,b){return a.each(function(){l(this,b)})},add:function(a,b){return a.each(function(){o(this,b)})},remove:function(a,b){return a.each(function(){p(this,b)})}},a.fn.accordion.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["width","height",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))},a.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,onSelect:function(a,b){},onUnselect:function(a,b){},onAdd:function(a,b){},onBeforeRemove:function(a,b){},onRemove:function(a,b){}}})(jQuery)